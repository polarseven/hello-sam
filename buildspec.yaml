version: 0.2
  #AWS CodeBuild
env:
  variables:
    INPUT_FILE: sam/template.yaml
    CONFIG_FILE: sam/configuration.json
    OUTPUT_FILE: output-sam.yaml
phases:
  install:
    commands:
    - aws cloudformation package --template $INPUT_FILE --s3-bucket $PACKAGE_BUCKET --output-template $OUTPUT_FILE
  # prebuild:
  # build:
  # postbuild:

artifacts:
  files:
  - $INPUT_FILE
  - $OUTPUT_FILE
  - $CONFIG_FILE
  discard-paths: no